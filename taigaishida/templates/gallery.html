{% extends "layout.html" %} {% block content %}

<section>
  <img
    src="{{ gallery[0] }}"
    class="image-transition object-scale-down h-screen-95 mx-auto pb-10"
    id="currentImage"
  />
</section>

<script type="text/javascript">
  const images = {{ gallery|safe }};
  
  function fisherYatesShuffle(array) {
    let currentIndex = array.length, temporaryValue, randomIndex;

    // While there remain elements to shuffle...
    while (0 !== currentIndex) {

      // Pick a remaining element...
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex -= 1;

      // And swap it with the current element.
      temporaryValue = array[currentIndex];
      array[currentIndex] = array[randomIndex];
      array[randomIndex] = temporaryValue;
    }

    return array;
  }

  const shuffled = fisherYatesShuffle(images);
  
  let currentImageIndex = 0;
  setInterval(() => {
    let nextImageIndex = (currentImageIndex + 1) % shuffled.length;
    let currentImage = document.getElementById("currentImage");
    currentImage.src = shuffled[nextImageIndex];
    currentImage.classList.add("opacity-0");
    setTimeout(() => {
      currentImage.classList.remove("opacity-0");
    }, 10);
    currentImageIndex = nextImageIndex;
  }, 3000);
</script>

{% endblock %}

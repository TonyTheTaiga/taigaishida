{% extends "layout.html" %}
{% block content %}
<section class="min-h-screen">
  <div class="max-w-6xl mx-auto p-8">
    <div class="divide-y divide-gray-100">
      {% for item in gallery %}
        <div
          class="grid grid-cols-4 py-3 hover:bg-gray-50 transition-colors cursor-pointer"
          data-image="{{ item.url }}"
          onmousemove="handleMouseMove(event, this)"
          onmouseleave="hidePreview()"
        >
          <div class="font-mono text-sm text-gray-500 pr-4">
            IMG_{{ '%04d' | format(loop.index) }}.jpg
          </div>
          <div class="font-serif pr-4">
            {{ item.line1 }}
          </div>
          <div class="font-serif pr-4">
            {{ item.line2 }}
          </div>
          <div class="font-serif">
            {{ item.line3 }}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- Image Preview -->
  <div 
    id="preview"
    class="fixed pointer-events-none shadow-lg hidden"
    style="z-index: 50;"
  >
    <img 
      id="previewImage"
      alt="Preview"
      class="w-64 h-48 object-cover"
    />
  </div>
</section>

<script type="text/javascript">
  const preview = document.getElementById('preview');
  const previewImage = document.getElementById('previewImage');

  function handleMouseMove(event, element) {
    const imageUrl = element.dataset.image;
    const x = event.clientX + 20;
    const y = event.clientY - 100;
    
    // Keep preview within viewport
    const maxX = window.innerWidth - 256;
    const maxY = window.innerHeight - 192;
    
    preview.style.left = Math.min(x, maxX) + 'px';
    preview.style.top = Math.max(20, Math.min(y, maxY)) + 'px';
    preview.classList.remove('hidden');
    
    previewImage.src = imageUrl;
  }

  function hidePreview() {
    preview.classList.add('hidden');
  }
</script>
{% endblock %}